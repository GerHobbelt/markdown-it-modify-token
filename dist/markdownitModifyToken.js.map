{"version":3,"file":"markdownItModifyToken.modern.js","sources":["../index.js"],"sourcesContent":["\n\nfunction modifyToken(token, modifyFn, env) {\n  // create attrObj for convenient get/set of attributes\n  let attrObj = (token.attrs) ? token.attrs.reduce(function (acc, pair) {\n    acc[pair[0]] = pair[1];\n    return acc;\n  }, {}) : {};\n  token.attrObj = attrObj;\n  modifyFn(token, env);\n  // apply any overrides or new attributes from attrObj\n  Object.keys(token.attrObj).forEach(function (k) {\n    token.attrSet(k, token.attrObj[k]);\n  });\n}\n\nfunction noop() { }\n\nexport default function (md) {\n  md.core.ruler.push(\n    'modify-token',\n    function (state) {\n      let modifyFn = md.options.modifyToken || noop;\n      state.tokens.forEach(function (token) {\n        if (token.children && token.children.length) {\n          token.children.forEach(function (token) {\n            modifyToken(token, modifyFn, state.env);\n          });\n        }\n        modifyToken(token, modifyFn, state.env);\n      });\n      return false;\n    }\n  );\n}\n"],"names":["modifyToken","token","modifyFn","env","attrObj","attrs","reduce","acc","pair","Object","keys","forEach","k","attrSet","noop","md","core","ruler","push","state","options","tokens","children","length"],"mappings":"AAEA,SAASA,WAAT,CAAqBC,KAArB,EAA4BC,QAA5B,EAAsCC,GAAtC,EAA2C;AACzC;AACA,MAAIC,OAAO,GAAIH,KAAK,CAACI,KAAP,GAAgBJ,KAAK,CAACI,KAAN,CAAYC,MAAZ,CAAmB,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AACpED,IAAAA,GAAG,CAACC,IAAI,CAAC,CAAD,CAAL,CAAH,GAAeA,IAAI,CAAC,CAAD,CAAnB;AACA,WAAOD,GAAP;AACD,GAH6B,EAG3B,EAH2B,CAAhB,GAGL,EAHT;AAIAN,EAAAA,KAAK,CAACG,OAAN,GAAgBA,OAAhB;AACAF,EAAAA,QAAQ,CAACD,KAAD,EAAQE,GAAR,CAAR,CAPyC;;AASzCM,EAAAA,MAAM,CAACC,IAAP,CAAYT,KAAK,CAACG,OAAlB,EAA2BO,OAA3B,CAAmC,UAAUC,CAAV,EAAa;AAC9CX,IAAAA,KAAK,CAACY,OAAN,CAAcD,CAAd,EAAiBX,KAAK,CAACG,OAAN,CAAcQ,CAAd,CAAjB;AACD,GAFD;AAGD;;AAED,SAASE,IAAT,GAAgB;;AAED,gBAAUC,EAAV,EAAc;AAC3BA,EAAAA,EAAE,CAACC,IAAH,CAAQC,KAAR,CAAcC,IAAd,CACE,cADF,EAEE,UAAUC,KAAV,EAAiB;AACf,QAAIjB,QAAQ,GAAGa,EAAE,CAACK,OAAH,CAAWpB,WAAX,IAA0Bc,IAAzC;AACAK,IAAAA,KAAK,CAACE,MAAN,CAAaV,OAAb,CAAqB,UAAUV,KAAV,EAAiB;AACpC,UAAIA,KAAK,CAACqB,QAAN,IAAkBrB,KAAK,CAACqB,QAAN,CAAeC,MAArC,EAA6C;AAC3CtB,QAAAA,KAAK,CAACqB,QAAN,CAAeX,OAAf,CAAuB,UAAUV,KAAV,EAAiB;AACtCD,UAAAA,WAAW,CAACC,KAAD,EAAQC,QAAR,EAAkBiB,KAAK,CAAChB,GAAxB,CAAX;AACD,SAFD;AAGD;;AACDH,MAAAA,WAAW,CAACC,KAAD,EAAQC,QAAR,EAAkBiB,KAAK,CAAChB,GAAxB,CAAX;AACD,KAPD;AAQA,WAAO,KAAP;AACD,GAbH;AAeD;;;;"}